let city=document.querySelector(".header__inner-top__city-location"),modal=document.querySelector(".header__inner-top__city-modal");const selectedAll=document.querySelector(".header__inner-top__city-modal__selected");let clearInput=document.querySelector(".header__inner-top__city-modal__clear");const areasList=document.querySelector(".header__inner-top__city-modal__items");let selectMod=document.querySelector(".header__inner-top__city-modal__select");const btnModal=document.querySelector(".header__inner-top__city-modal__btn"),scope=document.querySelector(".header__inner-top__city-scope"),ariasData=[{name:"Россия",type:"country",id:"all",class:""},{name:"Алтайский край",id:24,type:"area",class:"",cities:[{name:"Барнаул",id:15,state_id:24,class:""},{name:"Бийск",id:16,state_id:24,class:""},{name:"Благовещенка",id:1595,state_id:24,class:""},{name:"Волчиха",id:1659,state_id:24,class:""},{name:"Камень-на-Оби",id:631,state_id:24,class:""},{name:"Новоалтайск",id:632,state_id:24,class:""},{name:"Родино",id:1593,state_id:24,class:""}]}];let inputCity=document.querySelector(".header__inner-top__city-modal__settlement");function inserMark(e,t,a){return e.slice(0,t)+"<mark>"+e.slice(t,t+a)+"</mark>"+e.slice(t+a)}inputCity.oninput=function(){let e=this.value.trim(),t=document.querySelectorAll(".header__inner-top__city-modal__item");""!==e?t.forEach((t=>{if(-1===t.innerText.search(e))t.classList.add("hide"),t.innerHTML=t.innerText;else{t.classList.remove("hide");let a=t.innerText;t.innerHTML=inserMark(a,t.innerText.search(e),e.length)}})):t.forEach((e=>{e.classList.remove("hide"),e.innerHTML=e.innerText}));const a=document.querySelector(".header__inner-top__city-modal__close");e.length?a.style.display="block":a.style.display="none",a.onclick=()=>{inputCity.value="",a.style.display="none",t.forEach((e=>{e.classList.remove("hide"),e.innerHTML=e.innerText}))}};const onAddData=e=>{const t=document.createElement("div");t.className="header__inner-top__city-modal__select";const a=document.createElement("img");a.className="header__inner-top__city-modal__select__clear",a.src="../images/close-modal.svg",t.id=e.target.id,t.setAttribute("data-type",e.target.getAttribute("data-type")),e.target.getAttribute("data-type"),t.textContent=e.target.textContent,t.appendChild(a),selectedAll.appendChild(t),a.onclick=()=>{t.remove(),btnModal.classList.toggle("active")},btnModal.classList.toggle("active")},onAddSelected=()=>{selectedAll.children.length};btnModal.onclick=onAddSelected;let isModalOpen=!1;const onShowModal=()=>{if(modal.classList.toggle("toggle"),!modal.getAttribute("class").includes("toggle")&&!isModalOpen){for(let e=0;e<ariasData.length;e++){const t=document.createElement("div");if(t.className="header__inner-top__city-modal__item",t.id=ariasData[e].id,t.setAttribute("data-type",ariasData[e].type),t.textContent=ariasData[e].name,areasList.appendChild(t),t.onclick=onAddData,ariasData[e].cities){let t=ariasData[e].cities;for(let e=0;e<t.length;e++){const a=document.createElement("div");a.className="header__inner-top__city-modal__item",a.id=t[e].id,a.setAttribute("data-type",t[e].type),a.textContent=t[e].name,areasList.appendChild(a),a.onclick=onAddData}}}isModalOpen=!0}};city.onclick=onShowModal;